(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{386:function(e,t,a){e.exports=a(672)},500:function(e,t,a){},501:function(e,t,a){},516:function(e,t,a){},672:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(12),o=a.n(l),c=(a(391),a(392),a(500),a(43)),i=a(44),s=a(46),u=a(45),m=a(47),p=(a(501),a(37)),d=a(93),f=a(107),h=(a(502),a(363)),g=(a(504),a(364)),b=(a(505),a(369)),E=(a(228),a(83)),y=(a(508),a(379)),v=(a(332),a(53)),w=(a(229),a(112)),k=(a(159),a(19)),O=(a(513),a(260)),j={isAuthenticated:!!localStorage.getItem("access-token"),authenticate:function(e){this.isAuthenticated=!0,setTimeout(e,200)},logout:function(e){this.isAuthenticated=!1,setTimeout(e,200)}},C=a(81),x=a(108),R=a.n(x);a(516);function S(){var e=Object(f.a)(["\n\tmutation($userInput: LoginUserInput!) {\n\t\tlogin(userInput: $userInput) {\n\t\t\ttoken\n\t\t}\n\t}\n"]);return S=function(){return e},e}var I=O.a.Title,P=O.a.Text,D=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),a.setState({spin:!0}),a.props.form.validateFields(function(e,t){e||console.log("Received values of form: ",t);var n=a.props.client,r=t.email,l=t.password;n.mutate({mutation:A,variables:{userInput:{email:r,password:l}}}).then(function(e){j.authenticate(function(){localStorage.setItem("access-token",e.data.login.token),a.props.history.push("/"),a.setState({spin:!1})})}).catch(function(e){console.log(e);var t=e.graphQLErrors.map(function(e){return e.message});a.setState({spin:!1,errors:t})})})},a.state={email:"chin@gmail.com",password:"d3f4ultP4ssword!",spin:!1,errors:[]},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){localStorage.getItem("token")&&this.props.history.push("/")}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.state,a=t.email,n=t.password,l=t.errors,o=t.spin;return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{id:"layout-login"},r.a.createElement(g.a,{xs:{span:24,offset:0},sm:{span:16,offset:8},md:{span:14,offset:10},lg:{span:12,offset:12},xl:{span:7,offset:17}},r.a.createElement("div",{id:"components-form-demo-normal-login"},r.a.createElement(v.a,{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement("div",{className:"login-form-header"},r.a.createElement(I,{level:2},"Chnirt")),r.a.createElement(v.a.Item,{value:"sadasdsadas"},e("email",{valuePropName:"defaultValue",initialValue:a,rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}]})(r.a.createElement(w.a,{prefix:r.a.createElement(k.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Your@email.com"}))),r.a.createElement(v.a.Item,null,e("password",{valuePropName:"defaultValue",initialValue:n,rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(w.a,{prefix:r.a.createElement(k.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),r.a.createElement(v.a.Item,null,e("remember",{valuePropName:"checked",initialValue:!0})(r.a.createElement(y.a,null,"Remember me")),r.a.createElement(p.b,{to:"/forgot",className:"login-form-forgot"},"Forgot password"),r.a.createElement(E.a,{type:"primary",htmlType:"submit",className:"login-form-button"},o?r.a.createElement(k.a,{type:"loading",spin:!0}):r.a.createElement(k.a,{type:"login"}),"Log in"),r.a.createElement(P,null,l&&l.map(function(e){return e})),r.a.createElement(b.a,null,"OR"),r.a.createElement(p.b,{to:"/register"},"register now!")))))))}}]),t}(n.Component),A=R()(S()),F=Object(C.b)(v.a.create({name:"normal_login"})(D)),N=a(176),L=(a(130),a(48)),T=L.a.Content,q=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={email:"chin@gmail.com",password:"1",message:""},a.onChange=function(e){a.setState(Object(N.a)({},e.target.name,e.target.value))},a.onSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){console.log("Received values of form: ",t);t.email,t.password}})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){localStorage.getItem("token")&&this.props.history.push("/")}},{key:"render",value:function(){var e=this.state.message,t=this.props.form.getFieldDecorator;return r.a.createElement(L.a,null,r.a.createElement(T,null,r.a.createElement(v.a,Object.assign({},{wrapperCol:{md:{span:4,offset:10}}},{onSubmit:this.onSubmit,className:"login-form"}),r.a.createElement(v.a.Item,null,t("email",{rules:[{required:!0,message:"Please input your username!"}]})(r.a.createElement(w.a,{prefix:r.a.createElement(k.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"email"}))),r.a.createElement(v.a.Item,null,t("password",{rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(w.a,{prefix:r.a.createElement(k.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),r.a.createElement(v.a.Item,null,r.a.createElement(E.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Register"),"Or Have an account?",r.a.createElement(p.b,{to:"/login"},"Log in"))),e))}}]),t}(n.Component),G=v.a.create({name:"normal_login"})(q),M=function(e){return r.a.createElement(d.b,{exact:e.exact,path:e.path,render:function(){return r.a.createElement(e.component,{routes:e.routes})}})},U=(a(650),a(382)),_=(a(652),a(374)),z=(a(353),a(74));function B(){var e=Object(f.a)(["\n\tquery {\n\t\tme {\n\t\t\t_id\n\t\t\temail\n\t\t\tusername\n\t\t\tfirstLetterOfEmail\n\t\t}\n\t}\n"]);return B=function(){return e},e}var V=L.a.Header,H=z.a.SubMenu,W=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).onLogout=function(){var e=a.props.history;j.logout(function(){localStorage.removeItem("access-token"),e.push("/login")})},a.state={me:{}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.client;console.log(t),t.query({query:Q}).then(function(t){console.log(t.data.me),e.setState({me:t.data.me})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this.props.location,t=this.state.me;return r.a.createElement(V,{id:"components-layout-demo-fixed",style:{background:"#ffff",position:"fixed",zIndex:"1",width:"100%",boxShadow:"0px 0px 5px 0px rgba(50, 50, 50, 0.75)"}},r.a.createElement("div",{className:"logo"}),r.a.createElement(z.a,{mode:"horizontal",style:{float:"right",lineHeight:"62px"},defaultSelectedKeys:[e.pathname],selectable:!1},r.a.createElement(H,{key:"sub1",title:r.a.createElement("span",null,r.a.createElement(_.a,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),r.a.createElement("span",null,t&&t.username))},pe&&pe.map(function(e,t){return r.a.createElement(z.a.Item,{key:t},r.a.createElement(p.b,{to:e.path},r.a.createElement(k.a,{type:e.icon}),e.label.toUpperCase()))}),r.a.createElement(z.a.Divider,null),r.a.createElement(z.a.Item,{onClick:this.onLogout},r.a.createElement(k.a,{type:"logout"}),"LOG OUT"))))}}]),t}(n.Component),Q=R()(B()),$=Object(C.b)(Object(d.f)(W)),J=L.a.Sider,K=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={currentRoute:"/"},a.handleClick=function(e){console.log("click sider: ",e.key),a.setState({currentRoute:e.key})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.location;return r.a.createElement(J,{theme:"light",style:{overflow:"auto",height:"100vh",position:"fixed",left:0}},r.a.createElement(z.a,{mode:"inline",defaultSelectedKeys:[t.pathname],onClick:function(t){return e.handleClick(t)}},me&&me.map(function(e,t){return r.a.createElement(z.a.Item,{key:e.path},r.a.createElement(p.b,{to:e.path},r.a.createElement(k.a,{type:e.icon}),e.label.toUpperCase()))})))}}]),t}(r.a.Component),X=Object(d.f)(K),Y=(a(661),a(136)),Z={"/":"dashboard","/login":"login","/register":"register","/members":"members","/posts":"posts","/likes":"likes","/profile":"profile","/updateinformation":"updateinformation","/changepassword":"changepassword"},ee=Object(d.f)(function(e){var t=e.location.pathname.split("/").filter(function(e){return e}),a=t.map(function(e,a){var n="/".concat(t.slice(0,a+1).join("/")),l="".concat(t.slice(0,a+1));return Object.values(Z).indexOf(l)>-1?r.a.createElement(Y.a.Item,{key:n},Z[n].toUpperCase()):null});console.log(a);var n=[r.a.createElement(Y.a.Item,{key:"/"},Z["/"].toUpperCase())],l=[r.a.createElement(Y.a.Item,{key:"/"},r.a.createElement(p.b,{to:"/"},Z["/"].toUpperCase()))].concat(a);return r.a.createElement(Y.a,{separator:">",style:{margin:"16px 16px"}},a.length>0?l:n)}),te=L.a.Footer,ae=function(){return r.a.createElement(te,{style:{textAlign:"center"}},"Ant Design \xa92018 Created by Ant UED")},ne=L.a.Content,re=function(e){return r.a.createElement(L.a,null,r.a.createElement($,null),r.a.createElement(L.a,{style:{marginTop:64}},r.a.createElement(X,null),r.a.createElement(L.a,{style:{marginLeft:200}},r.a.createElement(ee,null),r.a.createElement(ne,{style:{margin:"0px 16px 0 16px",overflow:"auto"}},r.a.createElement("div",{style:{padding:24,background:"#fff"}},e.children,"...",r.a.createElement("br",null),"Really",r.a.createElement("br",null),"...",r.a.createElement("br",null),"Really",r.a.createElement("br",null),"...",r.a.createElement("br",null),"Really",r.a.createElement("br",null),"...",r.a.createElement("br",null),"Really",r.a.createElement("br",null),"...",r.a.createElement("br",null),"Really",r.a.createElement("br",null),"...",r.a.createElement("br",null),"Really",r.a.createElement("br",null),"...",r.a.createElement("br",null),"Really",r.a.createElement("br",null),"...",r.a.createElement("br",null),"Really",r.a.createElement("br",null),"...",r.a.createElement("br",null),"Really",r.a.createElement("br",null),"...",r.a.createElement("br",null),"content",r.a.createElement(U.a,null))),r.a.createElement(ae,null))))},le=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.routes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(re,null,r.a.createElement(d.d,null,e&&e.map(function(e,t){return r.a.createElement(M,Object.assign({key:t},e))}),r.a.createElement(d.a,{to:"/"}))))}}]),t}(n.Component),oe=a(375);function ce(){var e=Object(f.a)(["\n\tquery {\n\t\tusers {\n\t\t\t_id\n\t\t\tusername\n\t\t\tchats {\n\t\t\t\t_id\n\n\t\t\t\tusers {\n\t\t\t\t\t_id\n\t\t\t\t}\n\t\t\t\tmessages {\n\t\t\t\t\t_id\n\t\t\t\t}\n\t\t\t\tlastMessage {\n\t\t\t\t\t_id\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n"]);return ce=function(){return e},e}var ie=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,users:[],columnDefs:[{headerName:"Make",field:"make",filter:"agTextColumnFilter",suppressMenu:!0,enablePivot:!0,checkboxSelection:function(e){return 0===e.columnApi.getRowGroupColumns().length},headerCheckboxSelection:function(e){return 0===e.columnApi.getRowGroupColumns().length}},{headerName:"Model",field:"model",filter:"agTextColumnFilter"},{headerName:"Price",field:"price",filter:"agNumberColumnFilter"}],defaultColDef:{sortable:!0,filter:!0,resizable:!0},rowData:null,rowGroupPanelShow:"always",autoGroupColumnDef:{headerName:"Model",field:"model",cellRenderer:"agGroupCellRenderer",cellRendererParams:{checkbox:!0}},statusBar:{statusPanels:[{statusPanel:"agTotalRowCountComponent",align:"left"},{statusPanel:"agFilteredRowCountComponent"},{statusPanel:"agSelectedRowCountComponent"},{statusPanel:"agAggregationComponent"}]}},a.onGridReady=function(e){a.gridApi=e.api,a.gridColumnApi=e.columnApi,fetch("https://api.myjson.com/bins/ly7d1").then(function(e){return e.json()}).then(function(e){return a.setState({rowData:e})})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.client.query({query:se}).then(function(t){console.log(t.data.users),e.setState({users:t.data.users,loading:!1})}).catch(function(e){return console.log(e)})}},{key:"onFirstDataRendered",value:function(e){e.api.sizeColumnsToFit()}},{key:"render",value:function(){var e=this.state,t=e.users;return e.loading?r.a.createElement("h4",null,"Loading"):r.a.createElement(r.a.Fragment,null,"Dashboard",r.a.createElement("div",{className:"ag-theme-balham",style:{height:"500px",width:"100%"}},r.a.createElement(oe.AgGridReact,{columnDefs:this.state.columnDefs,defaultColDef:this.state.defaultColDef,animateRows:!0,rowData:this.state.rowData,floatingFilter:!0,rowSelection:"multiple",groupSelectsChildren:!0,autoGroupColumnDef:this.state.autoGroupColumnDef,onGridReady:this.onGridReady,onFirstDataRendered:this.onFirstDataRendered.bind(this),enableRangeSelection:!0,statusBar:this.state.statusBar,pagination:!0,debug:!0})),t&&t.map(function(e,t){return r.a.createElement("ul",{key:t},r.a.createElement("li",null,e._id," "),r.a.createElement("li",null,e.username))}))}}]),t}(n.Component),se=R()(ce()),ue=[{label:"Login",path:"/login",component:F},{label:"Register",path:"/register",component:G},{label:"Home",path:"/",private:!0,component:le,routes:[{label:"dashboard",path:"/",exact:!0,component:Object(C.b)(ie)},{label:"members",path:"/members",component:function(){return r.a.createElement("div",null,"Member Index")}},{label:"posts",path:"/posts",component:function(){return r.a.createElement("div",null,"Post Index")}},{label:"likes",path:"/likes",component:function(){return r.a.createElement("div",null,"Like Index")}},{label:"profile",path:"/profile",component:function(){return r.a.createElement("div",null,"Profile Page")}},{label:"updateinformation",path:"/updateinformation",component:function(){return r.a.createElement("div",null,"Update Information Page")}},{label:"changepassword",path:"/changepassword",component:function(){return r.a.createElement("div",null,"Change Password Page")}}]}],me=[{label:"dashboard",icon:"dashboard",path:"/"},{label:"members",icon:"team",path:"/members"},{label:"posts",icon:"file",path:"/posts"},{label:"likes",icon:"like",path:"/likes"}],pe=[{label:"my profile",icon:"user",path:"/profile"},{label:"update information",icon:"info-circle",path:"/updateinformation"},{label:"change password",icon:"key",path:"/changepassword"}],de=function(e){return r.a.createElement(d.b,{render:function(){return j.isAuthenticated?r.a.createElement(e.component,{routes:e.routes}):r.a.createElement(d.a,{to:"/login"})}})},fe=function(){return r.a.createElement(p.a,null,r.a.createElement(d.d,null,ue.map(function(e,t){return e.private?r.a.createElement(de,Object.assign({key:t},e)):r.a.createElement(d.b,Object.assign({key:t},e))}),r.a.createElement(d.a,{to:"/login"})))},he=a(376),ge=a(113),be=a(380),Ee=a(26),ye=a(381),ve=a(377),we=a(378),ke=new be.a,Oe=new ye.a({uri:"https://chnirthgraphql.herokuapp.com/graphql"}),je=new ve.a(function(e){var t=e.graphQLErrors,a=e.networkError,n=e.operation;t&&t.forEach(function(e){var t=e.message,a=e.path;return console.log("[GraphQL error]: Message: ".concat(t,", Path: ").concat(a))}),a&&console.log("[Network error ".concat(n.operationName,"]: ").concat(a.message))}),Ce=Object(we.a)(function(e,t){var a=t.headers,n=localStorage.getItem("access-token");return n?{headers:Object(he.a)({},a,{authorization:"Bearer ".concat(n)})}:null}),xe=new ge.a({cache:ke,link:Ee.a.from([je,Ce,Oe])}),Re=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(C.a,{client:xe},r.a.createElement(fe,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Re,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[386,1,2]]]);
//# sourceMappingURL=main.ebbdca04.chunk.js.map