(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{391:function(e,t,a){e.exports=a(676)},505:function(e,t,a){},506:function(e,t,a){},515:function(e,t,a){},660:function(e,t,a){},676:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),l=a.n(o),i=(a(396),a(397),a(505),a(27)),s=a(28),c=a(30),u=a(29),m=a(31),p=(a(506),a(44)),d=a(97),f=a(84),h=(a(236),a(112)),g=(a(238),a(96)),b=(a(337),a(183)),E=(a(162),a(70)),y=(a(338),a(51)),v=(a(163),a(76)),O=(a(164),a(18)),w=(a(339),a(115)),j=a(69),k=a(85),C=a.n(k),x=(a(515),{isAuthenticated:!!localStorage.getItem("access-token"),authenticate:function(e){this.isAuthenticated=!0,setTimeout(e,200)},logout:function(e){this.isAuthenticated=!1,setTimeout(e,200)}});function S(){var e=Object(f.a)(["\n\tmutation($userInput: LoginUserInput!) {\n\t\tlogin(userInput: $userInput) {\n\t\t\ttoken\n\t\t}\n\t}\n"]);return S=function(){return e},e}var A=w.a.Title,I=w.a.Text,R=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),a.setState({loading:!0,spin:!0}),a.props.form.validateFields(function(e,t){var n=a.props.client,r=t.email,o=t.password;n.mutate({mutation:P,variables:{userInput:{email:r,password:o}}}).then(function(e){x.authenticate(function(){localStorage.setItem("access-token",e.data.login.token),a.props.history.push("/"),a.setState({loading:!1,spin:!1})})}).catch(function(e){var t=e.graphQLErrors.map(function(e){return e.message});a.setState({loading:!1,spin:!1,errors:t})})})},a.state={email:"chin@gmail.com",password:"d3f4ultP4ssword!",loading:!1,errors:[]},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){localStorage.getItem("access-token")&&this.props.history.push("/")}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.state,a=t.email,n=t.password,o=t.errors,l=t.loading;return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{id:"layout-login"},r.a.createElement(g.a,{xs:{span:24,offset:0},sm:{span:16,offset:8},md:{span:14,offset:10},lg:{span:12,offset:12},xl:{span:7,offset:17}},r.a.createElement("div",{id:"components-form-demo-normal-login"},r.a.createElement(y.a,{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement("div",{className:"login-form-header"},r.a.createElement(A,{level:1},"Chnirt")),r.a.createElement(y.a.Item,null,e("email",{valuePropName:"defaultValue",initialValue:a,rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}]})(r.a.createElement(v.a,{prefix:r.a.createElement(O.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Your@email.com"}))),r.a.createElement(y.a.Item,null,e("password",{valuePropName:"defaultValue",initialValue:n,rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(v.a,{prefix:r.a.createElement(O.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),r.a.createElement(y.a.Item,null,r.a.createElement(E.a,{type:"primary",htmlType:"submit",className:"login-form-button",loading:l},l?null:r.a.createElement(O.a,{type:"login"}),"Log in")),r.a.createElement(b.a,null,"OR"),r.a.createElement(I,null,o&&o.map(function(e){return e})),r.a.createElement("br",null),r.a.createElement(p.b,{to:"/forgot"},"Forgot password?"),r.a.createElement("br",null),r.a.createElement("span",null,"Don't have an account?"),r.a.createElement(p.b,{to:"/register"}," Register."))))))}}]),t}(n.Component),P=C()(S()),D=Object(j.b)(y.a.create({name:"normal_login"})(R)),F=(a(643),a(383)),N=function(e,t,a,n){F.a[e]({key:t,message:a,description:n,placement:"bottomRight"})};function L(){var e=Object(f.a)(["\n\tmutation($userInput: UserInput!) {\n\t\tregister(userInput: $userInput)\n\t}\n"]);return L=function(){return e},e}var T=w.a.Title,V=w.a.Text,q=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={email:"chin@gmail.com",password:"d3f4ultP4ssword!",username:"trinhchin",loading:!1,errors:[]},a.handleSubmit=function(e){e.preventDefault(),a.setState({loading:!0,spin:!0}),a.props.form.validateFields(function(e,t){var n=a.props.client,r=t.email,o=t.password,l=t.username;n.mutate({mutation:U,variables:{userInput:{email:r,password:o,username:l}}}).then(function(e){e.data.register&&(N("success","register","Registration Successful.","We welcome a new MEMBER.","bottomRight"),a.setState({email:"",password:"",username:"",loading:!1,spin:!1}))}).catch(function(e){var t=e.graphQLErrors.map(function(e){return e.message});N("error","register","Registration Failed.",t[0]),a.setState({loading:!1,spin:!1,errors:t})})})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){localStorage.getItem("access-token")&&this.props.history.push("/")}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.username,o=e.errors,l=e.loading,i=this.props.form.getFieldDecorator;return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{id:"layout-login"},r.a.createElement(g.a,{xs:{span:24,offset:0},sm:{span:16,offset:8},md:{span:14,offset:10},lg:{span:12,offset:12},xl:{span:7,offset:17}},r.a.createElement("div",{id:"components-form-demo-normal-login"},r.a.createElement(y.a,{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement("div",{className:"login-form-header"},r.a.createElement(T,{level:1},"Chnirt"),r.a.createElement(T,{level:4},"Sign up to see photos and videos from your friends.")),r.a.createElement(y.a.Item,null,i("username",{valuePropName:"defaultValue",initialValue:n,rules:[{required:!0,message:"Please input your username!"}]})(r.a.createElement(v.a,{prefix:r.a.createElement(O.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"}))),r.a.createElement(y.a.Item,null,i("email",{valuePropName:"defaultValue",initialValue:t,rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}]})(r.a.createElement(v.a,{prefix:r.a.createElement(O.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Your@email.com"}))),r.a.createElement(y.a.Item,null,i("password",{valuePropName:"defaultValue",initialValue:a,rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(v.a,{prefix:r.a.createElement(O.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),r.a.createElement(y.a.Item,null,r.a.createElement(E.a,{type:"primary",htmlType:"submit",className:"login-form-button",loading:l},l?null:r.a.createElement(O.a,{type:"user-add"}),"Register"),r.a.createElement(V,null,o&&o.map(function(e){return e})),r.a.createElement(b.a,null,"OR"),"Already have an account?",r.a.createElement(p.b,{to:"/login"}," Login.")))))))}}]),t}(n.Component),U=C()(L()),G=Object(j.b)(y.a.create({name:"register"})(q)),M=function(e){return r.a.createElement(d.b,{exact:e.exact,path:e.path,render:function(){return r.a.createElement(e.component,{routes:e.routes})}})},_=(a(645),a(387)),B=(a(175),a(48)),z=(a(648),a(377)),H=(a(360),a(77));function Q(){var e=Object(f.a)(["\n\tquery {\n\t\tme {\n\t\t\t_id\n\t\t\temail\n\t\t\tusername\n\t\t\tfirstLetterOfEmail\n\t\t}\n\t}\n"]);return Q=function(){return e},e}var $=B.a.Header,W=H.a.SubMenu,J=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onLogout=function(){var e=a.props.history;x.logout(function(){localStorage.removeItem("access-token"),e.push("/login")})},a.state={me:{}},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.client.query({query:Y}).then(function(t){e.setState({me:t.data.me})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this.props.location,t=this.state.me;return r.a.createElement($,{id:"components-layout-demo-fixed",style:{background:"#ffff",position:"fixed",zIndex:"1",width:"100%",boxShadow:"0px 0px 5px 0px rgba(50, 50, 50, 0.75)"}},r.a.createElement("div",{className:"logo"}),r.a.createElement(H.a,{mode:"horizontal",style:{float:"right",lineHeight:"62px"},defaultSelectedKeys:[e.pathname],selectable:!1},r.a.createElement(W,{key:"sub1",title:r.a.createElement("span",null,r.a.createElement(z.a,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),r.a.createElement("span",null,t&&t.username))},ye&&ye.map(function(e,t){return r.a.createElement(H.a.Item,{key:t},r.a.createElement(p.b,{to:e.path},r.a.createElement(O.a,{type:e.icon}),e.label.toUpperCase()))}),r.a.createElement(H.a.Divider,null),r.a.createElement(H.a.Item,{onClick:this.onLogout},r.a.createElement(O.a,{type:"logout"}),"LOG OUT"))))}}]),t}(n.Component),Y=C()(Q()),K=Object(j.b)(Object(d.f)(J)),X=B.a.Sider,Z=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={currentRoute:"/"},a.handleClick=function(e){console.log("click sider: ",e.key),a.setState({currentRoute:e.key})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.location;return r.a.createElement(X,{theme:"light",style:{overflow:"auto",height:"100vh",position:"fixed",left:0}},r.a.createElement(H.a,{mode:"inline",defaultSelectedKeys:[t.pathname],onClick:function(t){return e.handleClick(t)}},Ee&&Ee.map(function(e,t){return r.a.createElement(H.a.Item,{key:e.path},r.a.createElement(p.b,{to:e.path},r.a.createElement(O.a,{type:e.icon}),e.label.toUpperCase()))})))}}]),t}(r.a.Component),ee=Object(d.f)(Z),te=(a(658),a(139)),ae={"/":"dashboard","/login":"login","/register":"register","/members":"members","/posts":"posts","/likes":"likes","/profile":"profile","/updateinformation":"updateinformation","/changepassword":"changepassword"},ne=Object(d.f)(function(e){var t=e.location.pathname.split("/").filter(function(e){return e}),a=t.map(function(e,a){var n="/".concat(t.slice(0,a+1).join("/")),o="".concat(t.slice(0,a+1));return Object.values(ae).indexOf(o)>-1?r.a.createElement(te.a.Item,{key:n},ae[n].toUpperCase()):null}),n=[r.a.createElement(te.a.Item,{key:"/"},ae["/"].toUpperCase())],o=[r.a.createElement(te.a.Item,{key:"/"},r.a.createElement(p.b,{to:"/"},ae["/"].toUpperCase()))].concat(a);return r.a.createElement(te.a,{separator:">",style:{margin:"16px 16px"}},a.length>0?o:n)}),re=B.a.Footer,oe=function(){return r.a.createElement(re,{style:{textAlign:"center"}},"Ant Design \xa92018 Created by Ant UED")},le=(a(660),B.a.Header,B.a.Sider,B.a.Content),ie=(B.a.Footer,function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={collapsed:!1},a.toggle=function(){a.setState({collapsed:!a.state.collapsed})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,null,r.a.createElement(K,null),r.a.createElement(B.a,{style:{marginTop:64}},r.a.createElement(ee,null),r.a.createElement(B.a,{style:{marginLeft:200}},r.a.createElement(ne,null),r.a.createElement(le,{style:{margin:"0px 16px 0 16px",overflow:"auto"}},r.a.createElement("div",{style:{padding:24,background:"#fff",minHeight:"81vh"}},this.props.children,r.a.createElement(_.a,null))),r.a.createElement(oe,null)))))}}]),t}(n.Component)),se=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.routes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ie,null,r.a.createElement(d.d,null,e&&e.map(function(e,t){return r.a.createElement(M,Object.assign({key:t},e))}),r.a.createElement(d.a,{to:"/"}))))}}]),t}(n.Component),ce=a(378),ue=(a(667),a(379)),me=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,{tip:"Loading..."}))}}]),t}(n.Component),pe=(a(671),a(86)),de=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(pe.a,{image:"https://gw.alipayobjects.com/mdn/miniapp_social/afts/img/A*pevERLJC9v0AAAAAAAAAAABjAQAAAQ/original",imageStyle:{height:100},description:r.a.createElement("span",null,"No Data")})}}]),t}(n.Component);function fe(){var e=Object(f.a)(["\n\tquery {\n\t\tusers {\n\t\t\t_id\n\t\t\tusername\n\t\t\temail\n\t\t\tfirstLetterOfEmail\n\t\t\tchats {\n\t\t\t\t_id\n\t\t\t\tusers {\n\t\t\t\t\t_id\n\t\t\t\t}\n\t\t\t\tmessages {\n\t\t\t\t\t_id\n\t\t\t\t}\n\t\t\t\tlastMessage {\n\t\t\t\t\t_id\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n"]);return fe=function(){return e},e}var he=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={columnDefs:[{headerName:"Id",field:"_id",filter:"agTextColumnFilter",checkboxSelection:function(e){return 0===e.columnApi.getRowGroupColumns().length},headerCheckboxSelection:function(e){return 0===e.columnApi.getRowGroupColumns().length}},{headerName:"Email",field:"email",filter:"agTextColumnFilter"},{headerName:"Username",field:"username",filter:"agTextColumnFilter"}],defaultColDef:{sortable:!0,filter:!0,resizable:!0},rowSelection:"multiple",rowData:null,frameworkComponents:{customLoadingOverlay:me,customNoRowsOverlay:de},loadingOverlayComponent:"customLoadingOverlay",noRowsOverlayComponent:"customNoRowsOverlay",rowGroupPanelShow:"always",autoGroupColumnDef:{headerName:"Model",field:"model",cellRenderer:"agGroupCellRenderer",cellRendererParams:{checkbox:!0}},statusBar:{statusPanels:[{statusPanel:"agTotalRowCountComponent",align:"left"},{statusPanel:"agFilteredRowCountComponent"},{statusPanel:"agSelectedRowCountComponent"},{statusPanel:"agAggregationComponent"}]}},a.onGridReady=function(e){a.gridApi=e.api,a.gridColumnApi=e.columnApi;var t=a.props.client;a.setState({rowData:[]}),t.query({query:ge}).then(function(e){a.setState({rowData:e.data.users})}).catch(function(e){return console.log(e)})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"onFirstDataRendered",value:function(e){e.api.sizeColumnsToFit()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,"Dashboard",r.a.createElement("div",{className:"ag-theme-balham",style:{height:"500px",width:"100%"}},r.a.createElement(ce.AgGridReact,{columnDefs:this.state.columnDefs,defaultColDef:this.state.defaultColDef,animateRows:!0,rowData:this.state.rowData,floatingFilter:!0,rowSelection:this.state.rowSelection,frameworkComponents:this.state.frameworkComponents,loadingOverlayComponent:this.state.loadingOverlayComponent,noRowsOverlayComponent:this.state.noRowsOverlayComponent,onGridReady:this.onGridReady,onFirstDataRendered:this.onFirstDataRendered.bind(this),enableRangeSelection:!0,statusBar:this.state.statusBar,pagination:!0})))}}]),t}(n.Component),ge=C()(fe()),be=[{label:"Login",path:"/login",component:D},{label:"Register",path:"/register",component:G},{label:"Home",path:"/",private:!0,component:se,routes:[{label:"dashboard",path:"/",exact:!0,component:Object(j.b)(he)},{label:"members",path:"/members",component:function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={vars:{"@primary-color":"#dddddd"}},a.onChange=function(e){var t=e.target.value;if(t.match(/^#[a-f0-9]{3,6}$/i)){var n=a.state.vars;n["@primary-color"]=t,a.setState({vars:n})}},a.updateVars=function(){window.less.modifyVars(a.state.vars).then(function(){console.log("Theme updated successfully")})},a.onClick=function(){window.less.modifyVars({"@primary-color":"#0035ff"})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"Members",r.a.createElement(h.a,null,r.a.createElement(g.a,{xs:16},"Primary Color: ",r.a.createElement(v.a,{onChange:this.onChange})),r.a.createElement(g.a,{xs:24},r.a.createElement(E.a,{type:"primary",onClick:this.onClick},"Update Vars"))))}}]),t}(n.Component)},{label:"posts",path:"/posts",component:function(){return r.a.createElement("div",null,"Post Index")}},{label:"likes",path:"/likes",component:function(){return r.a.createElement("div",null,"Like Index")}},{label:"profile",path:"/profile",component:function(){return r.a.createElement("div",null,"Profile Page")}},{label:"updateinformation",path:"/updateinformation",component:function(){return r.a.createElement("div",null,"Update Information Page")}},{label:"changepassword",path:"/changepassword",component:function(){return r.a.createElement("div",null,"Change Password Page")}}]}],Ee=[{label:"dashboard",icon:"dashboard",path:"/"},{label:"members",icon:"team",path:"/members"},{label:"posts",icon:"file",path:"/posts"},{label:"likes",icon:"like",path:"/likes"}],ye=[{label:"my profile",icon:"user",path:"/profile"},{label:"update information",icon:"info-circle",path:"/updateinformation"},{label:"change password",icon:"key",path:"/changepassword"}],ve=function(e){return r.a.createElement(d.b,{render:function(){return x.isAuthenticated?r.a.createElement(e.component,{routes:e.routes}):r.a.createElement(d.a,{to:"/login"})}})},Oe=function(){return r.a.createElement(p.a,null,r.a.createElement(d.d,null,be.map(function(e,t){return e.private?r.a.createElement(ve,Object.assign({key:t},e)):r.a.createElement(d.b,Object.assign({key:t},e))}),r.a.createElement(d.a,{to:"/login"})))},we=a(384),je=a(116),ke=a(385),Ce=a(32),xe=a(386),Se=a(381),Ae=a(382),Ie=new ke.a,Re=new xe.a({uri:"https://chnirthgraphql.herokuapp.com/graphql"}),Pe=new Se.a(function(e){var t=e.graphQLErrors,a=e.networkError,n=e.operation;t&&t.forEach(function(e){var t=e.message,a=e.path;return console.log("[GraphQL error]: Message: ".concat(t,", Path: ").concat(a))}),a&&console.log("[Network error ".concat(n.operationName,"]: ").concat(a.message))}),De=Object(Ae.a)(function(e,t){var a=t.headers,n=localStorage.getItem("access-token");return n?{headers:Object(we.a)({},a,{authorization:"Bearer ".concat(n)})}:null}),Fe=new je.a({cache:Ie,link:Ce.a.from([Pe,De,Re])}),Ne=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(j.a,{client:Fe},r.a.createElement(Oe,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(Ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[391,1,2]]]);
//# sourceMappingURL=main.414962e7.chunk.js.map