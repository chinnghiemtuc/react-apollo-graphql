(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{375:function(e,t,n){e.exports=n(651)},489:function(e,t,n){},490:function(e,t,n){},498:function(e,t,n){},651:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(11),l=n.n(o),c=(n(380),n(381),n(489),n(41)),i=n(42),s=n(45),u=n(43),m=n(46),p=(n(490),n(40)),h=n(91),d=(n(352),n(81)),f=n(105),g=n(106),b=(n(493),n(369)),E={isAuthenticated:!!localStorage.getItem("access-token"),authenticate:function(e){this.isAuthenticated=!0,setTimeout(e,200)},logout:function(e){this.isAuthenticated=!1,setTimeout(e,200)}},y=n(80),v=n(107),k=n.n(v);n(498);function w(){var e=Object(f.a)(["\n\tmutation($userInput: LoginUserInput!) {\n\t\tlogin(userInput: $userInput) {\n\t\t\ttoken\n\t\t}\n\t}\n"]);return w=function(){return e},e}b.a.Title;var O=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).onChange=function(e){n.setState(Object(g.a)({},e.target.name,e.target.value))},n.onLogin=function(e){e.preventDefault();var t=n.props.client,a=n.state,r=a.email,o=a.password;t.mutate({mutation:j,variables:{userInput:{email:r,password:o}}}).then(function(e){E.authenticate(function(){localStorage.setItem("access-token",e.data.login.token),n.props.history.push("/")})}).catch(function(e){console.log(e);var t=e.graphQLErrors.map(function(e){return e.message});n.setState({errors:t})})},n.handleSubmit=function(e){e.preventDefault(),n.props.form.validateFields(function(e,t){e||console.log("Received values of form: ",t)})},n.state={email:"chin@gmail.com",password:"d3f4ultP4ssword!",errors:[]},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){localStorage.getItem("token")&&this.props.history.push("/")}},{key:"render",value:function(){this.props.form.getFieldDecorator;var e=this.state,t=e.email,n=e.password,a=e.errors;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{margin:"auto",width:"50%",border:"3px solid green",padding:"10px"}},"Login",r.a.createElement("form",{onSubmit:this.onLogin},r.a.createElement("input",{name:"email",onChange:this.onChange,value:t}),r.a.createElement("br",null),r.a.createElement("input",{type:"password",name:"password",onChange:this.onChange,value:n}),r.a.createElement("br",null),r.a.createElement("button",{type:"submit"},"Login")),a&&a.map(function(e,t){return r.a.createElement("h4",{key:t},e)})))}}]),t}(a.Component),j=k()(w()),C=Object(y.b)(d.a.create({name:"normal_login"})(O)),x=(n(326),n(111)),R=(n(325),n(252)),S=(n(246),n(22)),D=(n(129),n(47)),I=D.a.Content,P=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={email:"chin@gmail.com",password:"1",message:""},n.onChange=function(e){n.setState(Object(g.a)({},e.target.name,e.target.value))},n.onSubmit=function(e){e.preventDefault(),n.props.form.validateFields(function(e,t){if(!e){console.log("Received values of form: ",t);t.email,t.password}})},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){localStorage.getItem("token")&&this.props.history.push("/")}},{key:"render",value:function(){var e=this.state.message,t=this.props.form.getFieldDecorator;return r.a.createElement(D.a,null,r.a.createElement(I,null,r.a.createElement(d.a,Object.assign({},{wrapperCol:{md:{span:4,offset:10}}},{onSubmit:this.onSubmit,className:"login-form"}),r.a.createElement(d.a.Item,null,t("email",{rules:[{required:!0,message:"Please input your username!"}]})(r.a.createElement(R.a,{prefix:r.a.createElement(S.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"email"}))),r.a.createElement(d.a.Item,null,t("password",{rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(R.a,{prefix:r.a.createElement(S.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),r.a.createElement(d.a.Item,null,r.a.createElement(x.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Register"),"Or Have an account?",r.a.createElement(p.b,{to:"/login"},"Log in"))),e))}}]),t}(a.Component),A=d.a.create({name:"normal_login"})(P),L=function(e){return r.a.createElement(h.b,{exact:e.exact,path:e.path,render:function(){return r.a.createElement(e.component,{routes:e.routes})}})},F=(n(628),n(372)),G=(n(630),n(364)),M=(n(346),n(73));function q(){var e=Object(f.a)(["\n\tquery {\n\t\tme {\n\t\t\t_id\n\t\t\temail\n\t\t\tusername\n\t\t\tfirstLetterOfEmail\n\t\t}\n\t}\n"]);return q=function(){return e},e}var N=D.a.Header,T=M.a.SubMenu,U=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).onLogout=function(){var e=n.props.history;E.logout(function(){localStorage.removeItem("access-token"),e.push("/login")})},n.state={me:{}},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.client;console.log(t),t.query({query:_}).then(function(t){console.log(t.data.me),e.setState({me:t.data.me})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this.props.location,t=this.state.me;return r.a.createElement(N,{id:"components-layout-demo-fixed",style:{background:"#ffff",position:"fixed",zIndex:"1",width:"100%",boxShadow:"0px 0px 5px 0px rgba(50, 50, 50, 0.75)"}},r.a.createElement("div",{className:"logo"}),r.a.createElement(M.a,{mode:"horizontal",style:{float:"right",lineHeight:"62px"},defaultSelectedKeys:[e.pathname],selectable:!1},r.a.createElement(T,{key:"sub1",title:r.a.createElement("span",null,r.a.createElement(G.a,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),r.a.createElement("span",null,t&&t.username))},le&&le.map(function(e,t){return r.a.createElement(M.a.Item,{key:t},r.a.createElement(p.b,{to:e.path},r.a.createElement(S.a,{type:e.icon}),e.label.toUpperCase()))}),r.a.createElement(M.a.Divider,null),r.a.createElement(M.a.Item,{onClick:this.onLogout},r.a.createElement(S.a,{type:"logout"}),"LOG OUT"))))}}]),t}(a.Component),_=k()(q()),z=Object(y.b)(Object(h.f)(U)),B=D.a.Sider,H=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={currentRoute:"/"},n.handleClick=function(e){console.log("click sider: ",e.key),n.setState({currentRoute:e.key})},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.location;return r.a.createElement(B,{theme:"light",style:{overflow:"auto",height:"100vh",position:"fixed",left:0}},r.a.createElement(M.a,{mode:"inline",defaultSelectedKeys:[t.pathname],onClick:function(t){return e.handleClick(t)}},oe&&oe.map(function(e,t){return r.a.createElement(M.a.Item,{key:e.path},r.a.createElement(p.b,{to:e.path},r.a.createElement(S.a,{type:e.icon}),e.label.toUpperCase()))})))}}]),t}(r.a.Component),W=Object(h.f)(H),Q=(n(640),n(135)),$={"/":"dashboard","/login":"login","/register":"register","/members":"members","/posts":"posts","/likes":"likes","/profile":"profiles","/updateinformation":"updateinformation","/changepassword":"changepassword"},J=Object(h.f)(function(e){var t=e.location.pathname.split("/").filter(function(e){return e}),n=t.map(function(e,n){var a="/".concat(t.slice(0,n+1).join("/")),o="".concat(t.slice(0,n+1));return Object.values($).indexOf(o)>-1?r.a.createElement(Q.a.Item,{key:a},$[a].toUpperCase()):null});console.log(n);var a=[r.a.createElement(Q.a.Item,{key:"/"},$["/"].toUpperCase())],o=[r.a.createElement(Q.a.Item,{key:"/"},r.a.createElement(p.b,{to:"/"},$["/"].toUpperCase()))].concat(n);return r.a.createElement(Q.a,{separator:">",style:{margin:"16px 16px"}},n.length>0?o:a)}),K=D.a.Footer,X=function(){return r.a.createElement(K,{style:{textAlign:"center"}},"Ant Design \xa92018 Created by Ant UED")},V=D.a.Content,Y=function(e){return r.a.createElement(D.a,null,r.a.createElement(z,null),r.a.createElement(D.a,{style:{marginTop:64}},r.a.createElement(W,null),r.a.createElement(D.a,{style:{marginLeft:200}},r.a.createElement(J,null),r.a.createElement(V,{style:{margin:"0px 16px 0 16px",overflow:"auto"}},r.a.createElement("div",{style:{padding:24,background:"#fff"}},e.children,"...",r.a.createElement("br",null),"Really",r.a.createElement("br",null),"...",r.a.createElement("br",null),"Really",r.a.createElement("br",null),"...",r.a.createElement("br",null),"Really",r.a.createElement("br",null),"...",r.a.createElement("br",null),"Really",r.a.createElement("br",null),"...",r.a.createElement("br",null),"Really",r.a.createElement("br",null),"...",r.a.createElement("br",null),"Really",r.a.createElement("br",null),"...",r.a.createElement("br",null),"Really",r.a.createElement("br",null),"...",r.a.createElement("br",null),"Really",r.a.createElement("br",null),"...",r.a.createElement("br",null),"Really",r.a.createElement("br",null),"...",r.a.createElement("br",null),"content",r.a.createElement(F.a,null))),r.a.createElement(X,null))))},Z=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.routes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y,null,r.a.createElement(h.d,null,e&&e.map(function(e,t){return r.a.createElement(L,Object.assign({key:t},e))}),r.a.createElement(h.a,{to:"/"}))))}}]),t}(a.Component),ee=n(365);function te(){var e=Object(f.a)(["\n\tquery {\n\t\tusers {\n\t\t\t_id\n\t\t\tusername\n\t\t\tchats {\n\t\t\t\t_id\n\n\t\t\t\tusers {\n\t\t\t\t\t_id\n\t\t\t\t}\n\t\t\t\tmessages {\n\t\t\t\t\t_id\n\t\t\t\t}\n\t\t\t\tlastMessage {\n\t\t\t\t\t_id\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n"]);return te=function(){return e},e}var ne=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,users:[],columnDefs:[{headerName:"Make",field:"make",filter:"agTextColumnFilter",suppressMenu:!0,enablePivot:!0,checkboxSelection:function(e){return 0===e.columnApi.getRowGroupColumns().length},headerCheckboxSelection:function(e){return 0===e.columnApi.getRowGroupColumns().length}},{headerName:"Model",field:"model",filter:"agTextColumnFilter"},{headerName:"Price",field:"price",filter:"agNumberColumnFilter"}],defaultColDef:{sortable:!0,filter:!0,resizable:!0},rowData:null,rowGroupPanelShow:"always",autoGroupColumnDef:{headerName:"Model",field:"model",cellRenderer:"agGroupCellRenderer",cellRendererParams:{checkbox:!0}},statusBar:{statusPanels:[{statusPanel:"agTotalRowCountComponent",align:"left"},{statusPanel:"agFilteredRowCountComponent"},{statusPanel:"agSelectedRowCountComponent"},{statusPanel:"agAggregationComponent"}]}},n.onGridReady=function(e){n.gridApi=e.api,n.gridColumnApi=e.columnApi,fetch("https://api.myjson.com/bins/ly7d1").then(function(e){return e.json()}).then(function(e){return n.setState({rowData:e})})},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.client.query({query:ae}).then(function(t){console.log(t.data.users),e.setState({users:t.data.users,loading:!1})}).catch(function(e){return console.log(e)})}},{key:"onFirstDataRendered",value:function(e){e.api.sizeColumnsToFit()}},{key:"render",value:function(){var e=this.state,t=e.users;return e.loading?r.a.createElement("h4",null,"Loading"):r.a.createElement(r.a.Fragment,null,"Dashboard",r.a.createElement("div",{className:"ag-theme-balham",style:{height:"500px",width:"100%"}},r.a.createElement(ee.AgGridReact,{columnDefs:this.state.columnDefs,defaultColDef:this.state.defaultColDef,animateRows:!0,rowData:this.state.rowData,floatingFilter:!0,rowSelection:"multiple",groupSelectsChildren:!0,autoGroupColumnDef:this.state.autoGroupColumnDef,onGridReady:this.onGridReady,onFirstDataRendered:this.onFirstDataRendered.bind(this),enableRangeSelection:!0,statusBar:this.state.statusBar,pagination:!0,debug:!0})),t&&t.map(function(e,t){return r.a.createElement("ul",{key:t},r.a.createElement("li",null,e._id," "),r.a.createElement("li",null,e.username))}))}}]),t}(a.Component),ae=k()(te()),re=[{label:"Login",path:"/login",component:C},{label:"Register",path:"/register",component:A},{label:"Home",path:"/",private:!0,component:Z,routes:[{label:"dashboard",path:"/",exact:!0,component:Object(y.b)(ne)},{label:"members",path:"/members",component:function(){return r.a.createElement("div",null,"Member Index")}},{label:"posts",path:"/posts",component:function(){return r.a.createElement("div",null,"Post Index")}},{label:"likes",path:"/likes",component:function(){return r.a.createElement("div",null,"Like Index")}},{label:"profile",path:"/profile",component:function(){return r.a.createElement("div",null,"Profile Page")}},{label:"updateinformation",path:"/updateinformation",component:function(){return r.a.createElement("div",null,"Update Information Page")}},{label:"changepassword",path:"/changepassword",component:function(){return r.a.createElement("div",null,"Change Password Page")}}]}],oe=[{label:"dashboard",icon:"dashboard",path:"/"},{label:"members",icon:"team",path:"/members"},{label:"posts",icon:"file",path:"/posts"},{label:"likes",icon:"like",path:"/likes"}],le=[{label:"my profile",icon:"user",path:"/profile"},{label:"update information",icon:"info-circle",path:"/updateinformation"},{label:"change password",icon:"key",path:"/changepassword"}],ce=function(e){return r.a.createElement(h.b,{render:function(){return E.isAuthenticated?r.a.createElement(e.component,{routes:e.routes}):r.a.createElement(h.a,{to:"/login"})}})},ie=function(){return r.a.createElement(p.a,null,r.a.createElement(h.d,null,re.map(function(e,t){return e.private?r.a.createElement(ce,Object.assign({key:t},e)):r.a.createElement(h.b,Object.assign({key:t},e))}),r.a.createElement(h.a,{to:"/login"})))},se=n(366),ue=n(112),me=n(370),pe=n(26),he=n(371),de=n(367),fe=n(368),ge=new me.a,be=new he.a({uri:"https://chnirthgraphql.herokuapp.com/graphql"}),Ee=new de.a(function(e){var t=e.graphQLErrors,n=e.networkError,a=e.operation;t&&t.forEach(function(e){var t=e.message,n=e.path;return console.log("[GraphQL error]: Message: ".concat(t,", Path: ").concat(n))}),n&&console.log("[Network error ".concat(a.operationName,"]: ").concat(n.message))}),ye=Object(fe.a)(function(e,t){var n=t.headers,a=localStorage.getItem("access-token");return a?{headers:Object(se.a)({},n,{authorization:"Bearer ".concat(a)})}:null}),ve=new ue.a({cache:ge,link:pe.a.from([Ee,ye,be])}),ke=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(y.a,{client:ve},r.a.createElement(ie,null))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(ke,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[375,1,2]]]);
//# sourceMappingURL=main.ea92bd7b.chunk.js.map