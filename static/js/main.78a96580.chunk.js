(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{384:function(e,t,a){e.exports=a(668)},498:function(e,t,a){},499:function(e,t,a){},514:function(e,t,a){},668:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(11),l=a.n(o),c=(a(389),a(390),a(498),a(42)),i=a(43),s=a(46),u=a(44),m=a(47),p=(a(499),a(36)),d=a(92),f=a(106),h=(a(500),a(361)),g=(a(502),a(362)),b=(a(503),a(367)),E=(a(227),a(80)),y=(a(506),a(378)),v=(a(330),a(53)),k=(a(228),a(112)),w=(a(159),a(20)),O=a(107),j=(a(511),a(377)),C={isAuthenticated:!!localStorage.getItem("access-token"),authenticate:function(e){this.isAuthenticated=!0,setTimeout(e,200)},logout:function(e){this.isAuthenticated=!1,setTimeout(e,200)}},x=a(78),S=a(108),I=a.n(S);a(514);function D(){var e=Object(f.a)(["\n\tmutation($userInput: LoginUserInput!) {\n\t\tlogin(userInput: $userInput) {\n\t\t\ttoken\n\t\t}\n\t}\n"]);return D=function(){return e},e}var R=j.a.Title,P=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).onChange=function(e){a.setState(Object(O.a)({},e.target.name,e.target.value))},a.onLogin=function(e){e.preventDefault();var t=a.props.client,n=a.state,r=n.email,o=n.password;t.mutate({mutation:A,variables:{userInput:{email:r,password:o}}}).then(function(e){C.authenticate(function(){localStorage.setItem("access-token",e.data.login.token),a.props.history.push("/")})}).catch(function(e){console.log(e);var t=e.graphQLErrors.map(function(e){return e.message});a.setState({errors:t})})},a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e||console.log("Received values of form: ",t)})},a.state={email:"chin@gmail.com",password:"d3f4ultP4ssword!",errors:[]},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){localStorage.getItem("token")&&this.props.history.push("/")}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.state;t.email,t.password,t.errors;return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{style:{backgroundColor:"pink"}},r.a.createElement(g.a,{xs:{span:24,offset:0},sm:{span:16,offset:8},lg:{span:7,offset:17}},r.a.createElement("div",{id:"components-form-demo-normal-login"},r.a.createElement(v.a,{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement("div",{className:"login-form-header"},r.a.createElement(R,{level:2},"Chnirt")),r.a.createElement(v.a.Item,null,e("userName",{rules:[{required:!0,message:"Please input your username!"}]})(r.a.createElement(k.a,{prefix:r.a.createElement(w.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"}))),r.a.createElement(v.a.Item,null,e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(k.a,{prefix:r.a.createElement(w.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),r.a.createElement(v.a.Item,null,e("remember",{valuePropName:"checked",initialValue:!0})(r.a.createElement(y.a,null,"Remember me")),r.a.createElement(p.b,{to:"/forgot",className:"login-form-forgot"},"Forgot password"),r.a.createElement(E.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Log in"),r.a.createElement(b.a,null,"OR"),"Or ",r.a.createElement(p.b,{to:"/register"},"register now!")))))),",")}}]),t}(n.Component),A=I()(D()),F=Object(x.b)(v.a.create({name:"normal_login"})(P)),N=(a(130),a(49)),L=N.a.Content,q=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={email:"chin@gmail.com",password:"1",message:""},a.onChange=function(e){a.setState(Object(O.a)({},e.target.name,e.target.value))},a.onSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){console.log("Received values of form: ",t);t.email,t.password}})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){localStorage.getItem("token")&&this.props.history.push("/")}},{key:"render",value:function(){var e=this.state.message,t=this.props.form.getFieldDecorator;return r.a.createElement(N.a,null,r.a.createElement(L,null,r.a.createElement(v.a,Object.assign({},{wrapperCol:{md:{span:4,offset:10}}},{onSubmit:this.onSubmit,className:"login-form"}),r.a.createElement(v.a.Item,null,t("email",{rules:[{required:!0,message:"Please input your username!"}]})(r.a.createElement(k.a,{prefix:r.a.createElement(w.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"email"}))),r.a.createElement(v.a.Item,null,t("password",{rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(k.a,{prefix:r.a.createElement(w.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),r.a.createElement(v.a.Item,null,r.a.createElement(E.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Register"),"Or Have an account?",r.a.createElement(p.b,{to:"/login"},"Log in"))),e))}}]),t}(n.Component),G=v.a.create({name:"normal_login"})(q),M=function(e){return r.a.createElement(d.b,{exact:e.exact,path:e.path,render:function(){return r.a.createElement(e.component,{routes:e.routes})}})},T=(a(648),a(372)),U=(a(351),a(71));function _(){var e=Object(f.a)(["\n\tquery {\n\t\tme {\n\t\t\t_id\n\t\t\temail\n\t\t\tusername\n\t\t\tfirstLetterOfEmail\n\t\t}\n\t}\n"]);return _=function(){return e},e}var z=N.a.Header,B=U.a.SubMenu,H=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).onLogout=function(){var e=a.props.history;C.logout(function(){localStorage.removeItem("access-token"),e.push("/login")})},a.state={me:{}},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.client;console.log(t),t.query({query:W}).then(function(t){console.log(t.data.me),e.setState({me:t.data.me})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this.props.location,t=this.state.me;return r.a.createElement(z,{id:"components-layout-demo-fixed",style:{background:"#ffff",position:"fixed",zIndex:"1",width:"100%",boxShadow:"0px 0px 5px 0px rgba(50, 50, 50, 0.75)"}},r.a.createElement("div",{className:"logo"}),r.a.createElement(U.a,{mode:"horizontal",style:{float:"right",lineHeight:"62px"},defaultSelectedKeys:[e.pathname],selectable:!1},r.a.createElement(B,{key:"sub1",title:r.a.createElement("span",null,r.a.createElement(T.a,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),r.a.createElement("span",null,t&&t.username))},ue&&ue.map(function(e,t){return r.a.createElement(U.a.Item,{key:t},r.a.createElement(p.b,{to:e.path},r.a.createElement(w.a,{type:e.icon}),e.label.toUpperCase()))}),r.a.createElement(U.a.Divider,null),r.a.createElement(U.a.Item,{onClick:this.onLogout},r.a.createElement(w.a,{type:"logout"}),"LOG OUT"))))}}]),t}(n.Component),W=I()(_()),Q=Object(x.b)(Object(d.f)(H)),$=N.a.Sider,J=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={currentRoute:"/"},a.handleClick=function(e){console.log("click sider: ",e.key),a.setState({currentRoute:e.key})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.location;return r.a.createElement($,{theme:"light",style:{height:"100vh",position:"fixed",left:0}},r.a.createElement(U.a,{mode:"inline",defaultSelectedKeys:[t.pathname],onClick:function(t){return e.handleClick(t)}},se&&se.map(function(e,t){return r.a.createElement(U.a.Item,{key:e.path},r.a.createElement(p.b,{to:e.path},r.a.createElement(w.a,{type:e.icon}),e.label.toUpperCase()))})))}}]),t}(r.a.Component),K=Object(d.f)(J),V=(a(657),a(136)),X={"/":"dashboard","/login":"login","/register":"register","/members":"members","/posts":"posts","/likes":"likes","/profile":"profiles","/updateinformation":"updateinformation","/changepassword":"changepassword"},Y=Object(d.f)(function(e){var t=e.location.pathname.split("/").filter(function(e){return e}),a=t.map(function(e,a){var n="/".concat(t.slice(0,a+1).join("/")),o="".concat(t.slice(0,a+1));return Object.values(X).indexOf(o)>-1?r.a.createElement(V.a.Item,{key:n},X[n].toUpperCase()):null});console.log(a);var n=[r.a.createElement(V.a.Item,{key:"/"},X["/"].toUpperCase())],o=[r.a.createElement(V.a.Item,{key:"/"},r.a.createElement(p.b,{to:"/"},X["/"].toUpperCase()))].concat(a);return r.a.createElement(V.a,{style:{margin:"16px 16px"}},a.length>0?o:n)}),Z=N.a.Footer,ee=function(){return r.a.createElement(Z,{style:{textAlign:"center"}},"Ant Design \xa92018 Created by Ant UED")},te=N.a.Content,ae=function(e){return r.a.createElement(N.a,{style:{height:"100vh"}},r.a.createElement(Q,null),r.a.createElement(te,{style:{marginTop:64}},r.a.createElement(K,null),r.a.createElement(N.a,{style:{marginLeft:200}},r.a.createElement(Y,null),r.a.createElement(te,{style:{margin:"0px 16px 0 16px"}},r.a.createElement("div",{style:{padding:24,background:"#fff"}},e.children,"...",r.a.createElement("br",null),"Really",r.a.createElement("br",null),"...",r.a.createElement("br",null),"Really",r.a.createElement("br",null),"...",r.a.createElement("br",null),"Really",r.a.createElement("br",null),"...",r.a.createElement("br",null),"content")),r.a.createElement(ee,null))))},ne=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props.routes;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ae,null,r.a.createElement(d.d,null,e&&e.map(function(e,t){return r.a.createElement(M,Object.assign({key:t},e))}),r.a.createElement(d.a,{to:"/"}))))}}]),t}(n.Component),re=a(373);function oe(){var e=Object(f.a)(["\n\tquery {\n\t\tusers {\n\t\t\t_id\n\t\t\tusername\n\t\t\tchats {\n\t\t\t\t_id\n\n\t\t\t\tusers {\n\t\t\t\t\t_id\n\t\t\t\t}\n\t\t\t\tmessages {\n\t\t\t\t\t_id\n\t\t\t\t}\n\t\t\t\tlastMessage {\n\t\t\t\t\t_id\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n"]);return oe=function(){return e},e}var le=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,users:[],columnDefs:[{headerName:"Make",field:"make",filter:"agTextColumnFilter",suppressMenu:!0,enablePivot:!0,checkboxSelection:function(e){return 0===e.columnApi.getRowGroupColumns().length},headerCheckboxSelection:function(e){return 0===e.columnApi.getRowGroupColumns().length}},{headerName:"Model",field:"model",filter:"agTextColumnFilter"},{headerName:"Price",field:"price",filter:"agNumberColumnFilter"}],defaultColDef:{sortable:!0,filter:!0,resizable:!0},rowData:null,rowGroupPanelShow:"always",autoGroupColumnDef:{headerName:"Model",field:"model",cellRenderer:"agGroupCellRenderer",cellRendererParams:{checkbox:!0}},statusBar:{statusPanels:[{statusPanel:"agTotalRowCountComponent",align:"left"},{statusPanel:"agFilteredRowCountComponent"},{statusPanel:"agSelectedRowCountComponent"},{statusPanel:"agAggregationComponent"}]}},a.onGridReady=function(e){a.gridApi=e.api,a.gridColumnApi=e.columnApi,fetch("https://api.myjson.com/bins/ly7d1").then(function(e){return e.json()}).then(function(e){return a.setState({rowData:e})})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.client.query({query:ce}).then(function(t){console.log(t.data.users),e.setState({users:t.data.users,loading:!1})}).catch(function(e){return console.log(e)})}},{key:"onFirstDataRendered",value:function(e){e.api.sizeColumnsToFit()}},{key:"render",value:function(){var e=this.state,t=e.users;return e.loading?r.a.createElement("h4",null,"Loading"):r.a.createElement(r.a.Fragment,null,"Dashboard",r.a.createElement("div",{className:"ag-theme-balham",style:{height:"500px",width:"100%"}},r.a.createElement(re.AgGridReact,{columnDefs:this.state.columnDefs,defaultColDef:this.state.defaultColDef,animateRows:!0,rowData:this.state.rowData,floatingFilter:!0,rowSelection:"multiple",groupSelectsChildren:!0,autoGroupColumnDef:this.state.autoGroupColumnDef,onGridReady:this.onGridReady,onFirstDataRendered:this.onFirstDataRendered.bind(this),enableRangeSelection:!0,statusBar:this.state.statusBar,pagination:!0,debug:!0})),t&&t.map(function(e,t){return r.a.createElement("ul",{key:t},r.a.createElement("li",null,e._id," "),r.a.createElement("li",null,e.username))}))}}]),t}(n.Component),ce=I()(oe()),ie=[{label:"Login",path:"/login",component:F},{label:"Register",path:"/register",component:G},{label:"Home",path:"/",private:!0,component:ne,routes:[{label:"dashboard",path:"/",exact:!0,component:Object(x.b)(le)},{label:"members",path:"/members",component:function(){return r.a.createElement("div",null,"Member Index")}},{label:"posts",path:"/posts",component:function(){return r.a.createElement("div",null,"Post Index")}},{label:"likes",path:"/likes",component:function(){return r.a.createElement("div",null,"Like Index")}},{label:"profile",path:"/profile",component:function(){return r.a.createElement("div",null,"Profile Page")}},{label:"updateinformation",path:"/updateinformation",component:function(){return r.a.createElement("div",null,"Update Information Page")}},{label:"changepassword",path:"/changepassword",component:function(){return r.a.createElement("div",null,"Change Password Page")}}]}],se=[{label:"dashboard",icon:"dashboard",path:"/"},{label:"members",icon:"team",path:"/members"},{label:"posts",icon:"file",path:"/posts"},{label:"likes",icon:"like",path:"/likes"}],ue=[{label:"my profile",icon:"user",path:"/profile"},{label:"update information",icon:"info-circle",path:"/updateinformation"},{label:"change password",icon:"key",path:"/changepassword"}],me=function(e){return r.a.createElement(d.b,{render:function(){return C.isAuthenticated?r.a.createElement(e.component,{routes:e.routes}):r.a.createElement(d.a,{to:"/login"})}})},pe=function(){return r.a.createElement(p.a,null,r.a.createElement(d.d,null,ie.map(function(e,t){return e.private?r.a.createElement(me,Object.assign({key:t},e)):r.a.createElement(d.b,Object.assign({key:t},e))}),r.a.createElement(d.a,{to:"/login"})))},de=a(374),fe=a(113),he=a(379),ge=a(26),be=a(380),Ee=a(375),ye=a(376),ve=new he.a,ke=new be.a({uri:"https://chnirthgraphql.herokuapp.com/graphql"}),we=new Ee.a(function(e){var t=e.graphQLErrors,a=e.networkError,n=e.operation;t&&t.forEach(function(e){var t=e.message,a=e.path;return console.log("[GraphQL error]: Message: ".concat(t,", Path: ").concat(a))}),a&&console.log("[Network error ".concat(n.operationName,"]: ").concat(a.message))}),Oe=Object(ye.a)(function(e,t){var a=t.headers,n=localStorage.getItem("access-token");return n?{headers:Object(de.a)({},a,{authorization:"Bearer ".concat(n)})}:null}),je=new fe.a({cache:ve,link:ge.a.from([we,Oe,ke])}),Ce=function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(x.a,{client:je},r.a.createElement(pe,null))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(Ce,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[384,1,2]]]);
//# sourceMappingURL=main.78a96580.chunk.js.map