{"ast":null,"code":"import _defineProperty from \"/Users/trinhchin/Desktop/React/MongooseAPI/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/trinhchin/Desktop/React/MongooseAPI/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/trinhchin/Desktop/React/MongooseAPI/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/trinhchin/Desktop/React/MongooseAPI/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/trinhchin/Desktop/React/MongooseAPI/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/trinhchin/Desktop/React/MongooseAPI/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/trinhchin/Desktop/React/MongooseAPI/client/src/pages/Login.js\";\nimport React, { Component } from \"react\";\nimport Auth from \"../auth/Authenticate\";\nimport { Link } from \"react-router-dom\";\nimport apiCaller from \"../utils/apiCaller\";\nimport \"./Login.css\";\nimport { Form, Input, Icon, Checkbox, Button } from \"antd\";\nexport var Login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Login, _Component);\n\n  function Login() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Login)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      email: \"chin@gmail.com\",\n      password: \"1\",\n      isAdmin: false,\n      message: \"\"\n    };\n\n    _this.onChange = function (e) {\n      e.target.name === \"isAdmin\" ? _this.setState(_defineProperty({}, e.target.name, e.target.checked)) : _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    };\n\n    _this.onSubmit = function (e) {\n      e.preventDefault();\n\n      _this.props.form.validateFields(function (err, values) {\n        if (!err) {\n          console.log(\"Received values of form: \", values);\n          var email = values.email,\n              password = values.password;\n          apiCaller(\"post\", \"users/login\", {\n            email: email,\n            password: password\n          }, null).then(function (res) {\n            Auth.authenticate(function () {\n              localStorage.setItem(\"token\", res.data.token);\n\n              _this.props.history.push(\"/\");\n            });\n          }).catch(function (err) {\n            var status = err.response.status;\n\n            if (status === 401) {\n              _this.setState({\n                message: \"Email or Password is not correct.\"\n              });\n            }\n          });\n        }\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var token = localStorage.getItem(\"token\");\n\n      if (token) {\n        this.props.history.push(\"/\");\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var message = this.state.message;\n      var getFieldDecorator = this.props.form.getFieldDecorator;\n      var formItemLayout = {\n        // labelCol: {\n        //   xs: { span: 12, offset: 6 },\n        //   sm: { span: 8, offset: 6 }\n        // },\n        wrapperCol: {\n          md: {\n            span: 12,\n            offset: 12\n          }\n        }\n      };\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(Form, Object.assign({}, formItemLayout, {\n        onSubmit: this.onSubmit,\n        className: \"login-form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }), React.createElement(Form.Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, getFieldDecorator(\"email\", {\n        rules: [{\n          required: true,\n          message: \"Please input your username!\"\n        }]\n      })(React.createElement(Input, {\n        prefix: React.createElement(Icon, {\n          type: \"user\",\n          style: {\n            color: \"rgba(0,0,0,.25)\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        }),\n        placeholder: \"email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, getFieldDecorator(\"password\", {\n        rules: [{\n          required: true,\n          message: \"Please input your Password!\"\n        }]\n      })(React.createElement(Input, {\n        prefix: React.createElement(Icon, {\n          type: \"lock\",\n          style: {\n            color: \"rgba(0,0,0,.25)\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105\n          },\n          __self: this\n        }),\n        type: \"password\",\n        placeholder: \"Password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }))), React.createElement(Form.Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, getFieldDecorator(\"remember\", {\n        valuePropName: \"checked\",\n        initialValue: false\n      })(React.createElement(Checkbox, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, \"Remember me\")), React.createElement(\"a\", {\n        className: \"login-form-forgot\",\n        href: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, \"Forgot password\"), React.createElement(Button, {\n        type: \"primary\",\n        htmlType: \"submit\",\n        className: \"login-form-button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, \"Log in\"), \"Or \", React.createElement(Link, {\n        to: \"/register\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, \"register now!\"))), message);\n    }\n  }]);\n\n  return Login;\n}(Component);\nexport default Form.create({\n  name: \"normal_login\"\n})(Login);","map":{"version":3,"sources":["/Users/trinhchin/Desktop/React/MongooseAPI/client/src/pages/Login.js"],"names":["React","Component","Auth","Link","apiCaller","Form","Input","Icon","Checkbox","Button","Login","state","email","password","isAdmin","message","onChange","e","target","name","setState","checked","value","onSubmit","preventDefault","props","form","validateFields","err","values","console","log","then","res","authenticate","localStorage","setItem","data","token","history","push","catch","status","response","getItem","getFieldDecorator","formItemLayout","wrapperCol","md","span","offset","rules","required","color","valuePropName","initialValue","create"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Auth from \"../auth/Authenticate\";\nimport { Link } from \"react-router-dom\";\nimport apiCaller from \"../utils/apiCaller\";\nimport \"./Login.css\";\nimport { Form, Input, Icon, Checkbox, Button } from \"antd\";\n\nexport class Login extends Component {\n  state = {\n    email: \"chin@gmail.com\",\n    password: \"1\",\n    isAdmin: false,\n    message: \"\"\n  };\n  onChange = e => {\n    e.target.name === \"isAdmin\"\n      ? this.setState({ [e.target.name]: e.target.checked })\n      : this.setState({\n          [e.target.name]: e.target.value\n        });\n  };\n  onSubmit = e => {\n    e.preventDefault();\n    this.props.form.validateFields((err, values) => {\n      if (!err) {\n        console.log(\"Received values of form: \", values);\n        const { email, password } = values;\n        apiCaller(\n          \"post\",\n          \"users/login\",\n          {\n            email: email,\n            password: password\n          },\n          null\n        )\n          .then(res => {\n            Auth.authenticate(() => {\n              localStorage.setItem(\"token\", res.data.token);\n              this.props.history.push(\"/\");\n            });\n          })\n          .catch(err => {\n            const { status } = err.response;\n\n            if (status === 401) {\n              this.setState({\n                message: \"Email or Password is not correct.\"\n              });\n            }\n          });\n      }\n    });\n  };\n  componentWillMount() {\n    const token = localStorage.getItem(\"token\");\n    if (token) {\n      this.props.history.push(\"/\");\n    }\n  }\n  render() {\n    const { message } = this.state;\n    const { getFieldDecorator } = this.props.form;\n    const formItemLayout = {\n      // labelCol: {\n      //   xs: { span: 12, offset: 6 },\n      //   sm: { span: 8, offset: 6 }\n      // },\n      wrapperCol: {\n        md: {\n          span: 12,\n          offset: 12\n        }\n      }\n    };\n    return (\n      <div>\n        <Form\n          {...formItemLayout}\n          onSubmit={this.onSubmit}\n          className=\"login-form\"\n        >\n          <Form.Item>\n            {getFieldDecorator(\"email\", {\n              rules: [\n                { required: true, message: \"Please input your username!\" }\n              ]\n            })(\n              <Input\n                prefix={\n                  <Icon type=\"user\" style={{ color: \"rgba(0,0,0,.25)\" }} />\n                }\n                placeholder=\"email\"\n              />\n            )}\n          </Form.Item>\n          <Form.Item>\n            {getFieldDecorator(\"password\", {\n              rules: [\n                { required: true, message: \"Please input your Password!\" }\n              ]\n            })(\n              <Input\n                prefix={\n                  <Icon type=\"lock\" style={{ color: \"rgba(0,0,0,.25)\" }} />\n                }\n                type=\"password\"\n                placeholder=\"Password\"\n              />\n            )}\n          </Form.Item>\n          <Form.Item>\n            {getFieldDecorator(\"remember\", {\n              valuePropName: \"checked\",\n              initialValue: false\n            })(<Checkbox>Remember me</Checkbox>)}\n            <a className=\"login-form-forgot\" href=\"/\">\n              Forgot password\n            </a>\n            <Button\n              type=\"primary\"\n              htmlType=\"submit\"\n              className=\"login-form-button\"\n            >\n              Log in\n            </Button>\n            Or <Link to=\"/register\">register now!</Link>\n          </Form.Item>\n          {/* <Input\n            name=\"email\"\n            value={email}\n            onChange={this.onChange}\n            placeholder=\"email\"\n            required\n          />\n          <br />\n          <Input\n            name=\"password\"\n            value={password}\n            onChange={this.onChange}\n            placeholder=\"password\"\n            required\n          />\n          <br />\n          <Checkbox name=\"isAdmin\" checked={isAdmin} onChange={this.onChange}>\n            isAdmin\n          </Checkbox>\n          <br />\n          <Button\n            type=\"primary\"\n            htmlType=\"submit\"\n            className=\"login-form-button\"\n          >\n            Log in\n          </Button>\n          <Link to=\"/register\">Register</Link> */}\n        </Form>\n        {message}\n      </div>\n    );\n  }\n}\n\nexport default Form.create({ name: \"normal_login\" })(Login);\n"]},"metadata":{},"sourceType":"module"}