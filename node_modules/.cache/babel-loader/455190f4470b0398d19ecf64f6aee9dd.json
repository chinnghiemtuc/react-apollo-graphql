{"ast":null,"code":"import _defineProperty from \"/Users/trinhchin/Desktop/React/MongooseAPI/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/trinhchin/Desktop/React/MongooseAPI/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/trinhchin/Desktop/React/MongooseAPI/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/trinhchin/Desktop/React/MongooseAPI/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/trinhchin/Desktop/React/MongooseAPI/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/trinhchin/Desktop/React/MongooseAPI/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/trinhchin/Desktop/React/MongooseAPI/client/src/pages/Login.js\";\nimport React, { Component } from \"react\";\nimport Auth from \"../auth/Authenticate\";\nimport { Link } from \"react-router-dom\";\nimport apiCaller from \"../utils/apiCaller\";\nimport { Form, Input, Checkbox, Button } from \"antd\";\nexport var Login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Login, _Component);\n\n  function Login() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Login)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      email: \"chin@gmail.com\",\n      password: \"1\",\n      isAdmin: false,\n      message: \"\"\n    };\n\n    _this.onChange = function (e) {\n      e.target.name === \"isAdmin\" ? _this.setState(_defineProperty({}, e.target.name, e.target.checked)) : _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    };\n\n    _this.onSubmit = function (e) {\n      e.preventDefault();\n      var _this$state = _this.state,\n          email = _this$state.email,\n          password = _this$state.password;\n\n      _this.props.form.validateFields(function (err, values) {\n        if (!err) {\n          console.log(\"Received values of form: \", values);\n        }\n      }); // apiCaller(\n      //   \"post\",\n      //   \"users/login\",\n      //   {\n      //     email: email,\n      //     password: password\n      //   },\n      //   null\n      // )\n      //   .then(res => {\n      //     Auth.authenticate(() => {\n      //       localStorage.setItem(\"token\", res.data.token);\n      //       // this.props.history.push(\"/\");\n      //     });\n      //   })\n      //   .catch(err => {\n      //     const { status } = err.response;\n      //     if (status === 401) {\n      //       this.setState({\n      //         message: \"Email or Password is not correct.\"\n      //       });\n      //     }\n      //   });\n\n    };\n\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var token = localStorage.getItem(\"token\");\n\n      if (token) {\n        this.props.history.push(\"/\");\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state2 = this.state,\n          email = _this$state2.email,\n          password = _this$state2.password,\n          isAdmin = _this$state2.isAdmin,\n          message = _this$state2.message;\n      var getFieldDecorator = this.props.form.getFieldDecorator;\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, React.createElement(Form, {\n        onSubmit: this.onSubmit,\n        className: \"login-form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(Form.Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, getFieldDecorator(\"userName\", {\n        rules: [{\n          required: true,\n          message: \"Please input your username!\"\n        }]\n      })(React.createElement(Input, {\n        prefix: React.createElement(Icon, {\n          type: \"user\",\n          style: {\n            color: \"rgba(0,0,0,.25)\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74\n          },\n          __self: this\n        }),\n        placeholder: \"Username\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }))), React.createElement(Input, {\n        name: \"email\",\n        value: email,\n        onChange: this.onChange,\n        placeholder: \"email\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }), React.createElement(Input, {\n        name: \"password\",\n        value: password,\n        onChange: this.onChange,\n        placeholder: \"password\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95\n        },\n        __self: this\n      }), React.createElement(Checkbox, {\n        name: \"isAdmin\",\n        checked: isAdmin,\n        onChange: this.onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96\n        },\n        __self: this\n      }, \"isAdmin\"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99\n        },\n        __self: this\n      }), React.createElement(Button, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, \"Login\"), React.createElement(Link, {\n        to: \"/register\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, \"Register\")), message);\n    }\n  }]);\n\n  return Login;\n}(Component);\nexport default Login;","map":{"version":3,"sources":["/Users/trinhchin/Desktop/React/MongooseAPI/client/src/pages/Login.js"],"names":["React","Component","Auth","Link","apiCaller","Form","Input","Checkbox","Button","Login","state","email","password","isAdmin","message","onChange","e","target","name","setState","checked","value","onSubmit","preventDefault","props","form","validateFields","err","values","console","log","token","localStorage","getItem","history","push","getFieldDecorator","rules","required","color"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,IAAP,MAAiB,sBAAjB;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAOC,SAAP,MAAsB,oBAAtB;AACA,SAASC,IAAT,EAAeC,KAAf,EAAsBC,QAAtB,EAAgCC,MAAhC,QAA8C,MAA9C;AAEA,WAAaC,KAAb;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,UACEC,KADF,GACU;AACNC,MAAAA,KAAK,EAAE,gBADD;AAENC,MAAAA,QAAQ,EAAE,GAFJ;AAGNC,MAAAA,OAAO,EAAE,KAHH;AAINC,MAAAA,OAAO,EAAE;AAJH,KADV;;AAAA,UAOEC,QAPF,GAOa,UAAAC,CAAC,EAAI;AACdA,MAAAA,CAAC,CAACC,MAAF,CAASC,IAAT,KAAkB,SAAlB,GACI,MAAKC,QAAL,qBAAiBH,CAAC,CAACC,MAAF,CAASC,IAA1B,EAAiCF,CAAC,CAACC,MAAF,CAASG,OAA1C,EADJ,GAEI,MAAKD,QAAL,qBACGH,CAAC,CAACC,MAAF,CAASC,IADZ,EACmBF,CAAC,CAACC,MAAF,CAASI,KAD5B,EAFJ;AAKD,KAbH;;AAAA,UAcEC,QAdF,GAca,UAAAN,CAAC,EAAI;AACdA,MAAAA,CAAC,CAACO,cAAF;AADc,wBAEc,MAAKb,KAFnB;AAAA,UAENC,KAFM,eAENA,KAFM;AAAA,UAECC,QAFD,eAECA,QAFD;;AAGd,YAAKY,KAAL,CAAWC,IAAX,CAAgBC,cAAhB,CAA+B,UAACC,GAAD,EAAMC,MAAN,EAAiB;AAC9C,YAAI,CAACD,GAAL,EAAU;AACRE,UAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyCF,MAAzC;AACD;AACF,OAJD,EAHc,CAQd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;;AACD,KA9CH;;AAAA;AAAA;;AAAA;AAAA;AAAA,yCA+CuB;AACnB,UAAMG,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;;AACA,UAAIF,KAAJ,EAAW;AACT,aAAKP,KAAL,CAAWU,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACD;AACF;AApDH;AAAA;AAAA,6BAqDW;AAAA,yBACuC,KAAKzB,KAD5C;AAAA,UACCC,KADD,gBACCA,KADD;AAAA,UACQC,QADR,gBACQA,QADR;AAAA,UACkBC,OADlB,gBACkBA,OADlB;AAAA,UAC2BC,OAD3B,gBAC2BA,OAD3B;AAAA,UAECsB,iBAFD,GAEuB,KAAKZ,KAAL,CAAWC,IAFlC,CAECW,iBAFD;AAGP,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AAAM,QAAA,QAAQ,EAAE,KAAKd,QAArB;AAA+B,QAAA,SAAS,EAAC,YAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGc,iBAAiB,CAAC,UAAD,EAAa;AAC7BC,QAAAA,KAAK,EAAE,CACL;AAAEC,UAAAA,QAAQ,EAAE,IAAZ;AAAkBxB,UAAAA,OAAO,EAAE;AAA3B,SADK;AADsB,OAAb,CAAjB,CAKC,oBAAC,KAAD;AACE,QAAA,MAAM,EACJ,oBAAC,IAAD;AAAM,UAAA,IAAI,EAAC,MAAX;AAAkB,UAAA,KAAK,EAAE;AAAEyB,YAAAA,KAAK,EAAE;AAAT,WAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFJ;AAIE,QAAA,WAAW,EAAC,UAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALD,CADH,CADF,EAeE,oBAAC,KAAD;AACE,QAAA,IAAI,EAAC,OADP;AAEE,QAAA,KAAK,EAAE5B,KAFT;AAGE,QAAA,QAAQ,EAAE,KAAKI,QAHjB;AAIE,QAAA,WAAW,EAAC,OAJd;AAKE,QAAA,QAAQ,MALV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAfF,EAsBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAtBF,EAuBE,oBAAC,KAAD;AACE,QAAA,IAAI,EAAC,UADP;AAEE,QAAA,KAAK,EAAEH,QAFT;AAGE,QAAA,QAAQ,EAAE,KAAKG,QAHjB;AAIE,QAAA,WAAW,EAAC,UAJd;AAKE,QAAA,QAAQ,MALV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAvBF,EA8BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QA9BF,EA+BE,oBAAC,QAAD;AAAU,QAAA,IAAI,EAAC,SAAf;AAAyB,QAAA,OAAO,EAAEF,OAAlC;AAA2C,QAAA,QAAQ,EAAE,KAAKE,QAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBA/BF,EAkCE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAlCF,EAmCE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAnCF,EAoCE,oBAAC,IAAD;AAAM,QAAA,EAAE,EAAC,WAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBApCF,CADF,EAuCGD,OAvCH,CADF;AA2CD;AAnGH;;AAAA;AAAA,EAA2Bb,SAA3B;AAsGA,eAAeQ,KAAf","sourcesContent":["import React, { Component } from \"react\";\nimport Auth from \"../auth/Authenticate\";\nimport { Link } from \"react-router-dom\";\nimport apiCaller from \"../utils/apiCaller\";\nimport { Form, Input, Checkbox, Button } from \"antd\";\n\nexport class Login extends Component {\n  state = {\n    email: \"chin@gmail.com\",\n    password: \"1\",\n    isAdmin: false,\n    message: \"\"\n  };\n  onChange = e => {\n    e.target.name === \"isAdmin\"\n      ? this.setState({ [e.target.name]: e.target.checked })\n      : this.setState({\n          [e.target.name]: e.target.value\n        });\n  };\n  onSubmit = e => {\n    e.preventDefault();\n    const { email, password } = this.state;\n    this.props.form.validateFields((err, values) => {\n      if (!err) {\n        console.log(\"Received values of form: \", values);\n      }\n    });\n    // apiCaller(\n    //   \"post\",\n    //   \"users/login\",\n    //   {\n    //     email: email,\n    //     password: password\n    //   },\n    //   null\n    // )\n    //   .then(res => {\n    //     Auth.authenticate(() => {\n    //       localStorage.setItem(\"token\", res.data.token);\n    //       // this.props.history.push(\"/\");\n    //     });\n    //   })\n    //   .catch(err => {\n    //     const { status } = err.response;\n\n    //     if (status === 401) {\n    //       this.setState({\n    //         message: \"Email or Password is not correct.\"\n    //       });\n    //     }\n    //   });\n  };\n  componentWillMount() {\n    const token = localStorage.getItem(\"token\");\n    if (token) {\n      this.props.history.push(\"/\");\n    }\n  }\n  render() {\n    const { email, password, isAdmin, message } = this.state;\n    const { getFieldDecorator } = this.props.form;\n    return (\n      <div>\n        <Form onSubmit={this.onSubmit} className=\"login-form\">\n          <Form.Item>\n            {getFieldDecorator(\"userName\", {\n              rules: [\n                { required: true, message: \"Please input your username!\" }\n              ]\n            })(\n              <Input\n                prefix={\n                  <Icon type=\"user\" style={{ color: \"rgba(0,0,0,.25)\" }} />\n                }\n                placeholder=\"Username\"\n              />\n            )}\n          </Form.Item>\n          <Input\n            name=\"email\"\n            value={email}\n            onChange={this.onChange}\n            placeholder=\"email\"\n            required\n          />\n          <br />\n          <Input\n            name=\"password\"\n            value={password}\n            onChange={this.onChange}\n            placeholder=\"password\"\n            required\n          />\n          <br />\n          <Checkbox name=\"isAdmin\" checked={isAdmin} onChange={this.onChange}>\n            isAdmin\n          </Checkbox>\n          <br />\n          <Button>Login</Button>\n          <Link to=\"/register\">Register</Link>\n        </Form>\n        {message}\n      </div>\n    );\n  }\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}